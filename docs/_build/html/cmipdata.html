<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cmipdata package &mdash; cmipdata  documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="cmipdata  documentation" href="index.html" />
    <link rel="prev" title="Welcome to cmipdata’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to cmipdata’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">cmipdata  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="cmipdata-package">
<h1>cmipdata package<a class="headerlink" href="#cmipdata-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cmipdata.classes">
<span id="cmipdata-classes-module"></span><h2>cmipdata.classes module<a class="headerlink" href="#module-cmipdata.classes" title="Permalink to this headline">¶</a></h2>
<p>Defines the Ensemble, Model, Experiment, Realization and Variable objects of
cmipdata and associated functions.</p>
<p>Neil Swart, 22/07/2014</p>
<dl class="class">
<dt id="cmipdata.classes.Ensemble">
<em class="property">class </em><tt class="descclassname">cmipdata.classes.</tt><tt class="descname">Ensemble</tt><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Defines a cmipdata ensemble. The ensemble contains
a list of model members.</p>
<dl class="method">
<dt id="cmipdata.classes.Ensemble.add_model">
<tt class="descname">add_model</tt><big>(</big><em>model</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.add_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.add_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the model object model to the ensemble</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Ensemble.del_model">
<tt class="descname">del_model</tt><big>(</big><em>model</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.del_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.del_model" title="Permalink to this definition">¶</a></dt>
<dd><p>deletes the model object model to the ensemble</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Ensemble.fulldetails">
<tt class="descname">fulldetails</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.fulldetails"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.fulldetails" title="Permalink to this definition">¶</a></dt>
<dd><p>prints information about the number of models, experiments and realizations in an ensemble</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Ensemble.get_model">
<tt class="descname">get_model</tt><big>(</big><em>modelname</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.get_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.get_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds and returns the model object corresponding
to modelname in the ensemble, or if no match is found, 
returns an empty list.</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Ensemble.iterate">
<tt class="descname">iterate</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.iterate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.iterate" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Returns a iterable, which is a tuple containing all the ensembles </dt>
<dd><p class="first">model, experiment, realization and variable objects and the list of filenames.</p>
<p class="last">EXAMPLE:</p>
</dd>
<dt>for model, experiment, realization, variable, files in ens.iterate():</dt>
<dd>print model.name, experiment.name, realization.name, variable.name, files</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Ensemble.models">
<tt class="descname">models</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.models" title="Permalink to this definition">¶</a></dt>
<dd><p>Retuns the list of model objects in the ensemble</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Ensemble.num_models">
<tt class="descname">num_models</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.num_models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.num_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of models in the ensemble</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Ensemble.sinfo">
<tt class="descname">sinfo</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.sinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.sinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of models, experiments, realizations, variables and files 
in the ensemble</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Ensemble.squeeze">
<tt class="descname">squeeze</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Ensemble.squeeze"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Ensemble.squeeze" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any empty elements from the ensemble
WARNING: since ens is modifying itself in the loop, something could go wrong!</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cmipdata.classes.Experiment">
<em class="property">class </em><tt class="descclassname">cmipdata.classes.</tt><tt class="descname">Experiment</tt><big>(</big><em>experimentname</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Defines an experiment for a given model, with a name and a list of
assiciated realizations, which can be retrieved with
experiment.realizations(). New realizations can be added
to the experiment with experiment.add_realization(realization)</p>
<dl class="method">
<dt id="cmipdata.classes.Experiment.add_realization">
<tt class="descname">add_realization</tt><big>(</big><em>realization</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Experiment.add_realization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Experiment.add_realization" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the realization object experiment to the 
experiments realizations.</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Experiment.del_realization">
<tt class="descname">del_realization</tt><big>(</big><em>realization</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Experiment.del_realization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Experiment.del_realization" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the realization object experiment to the 
experiments realizations.</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Experiment.get_realization">
<tt class="descname">get_realization</tt><big>(</big><em>realizationname</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Experiment.get_realization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Experiment.get_realization" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds and returns the realization object corresponding
to realizationname in the experiment&#8217;s realization list, or if no 
match is found, returns an empty list.</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Experiment.num_realizations">
<tt class="descname">num_realizations</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Experiment.num_realizations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Experiment.num_realizations" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of realizations defined for the 
experiment instance</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Experiment.realizations">
<tt class="descname">realizations</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Experiment.realizations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Experiment.realizations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cmipdata.classes.Model">
<em class="property">class </em><tt class="descclassname">cmipdata.classes.</tt><tt class="descname">Model</tt><big>(</big><em>modelname</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Defines a model with a name.</p>
<dl class="method">
<dt id="cmipdata.classes.Model.add_experiment">
<tt class="descname">add_experiment</tt><big>(</big><em>experiment</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Model.add_experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Model.add_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the experiment object experiment to the 
models experiments</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Model.del_experiment">
<tt class="descname">del_experiment</tt><big>(</big><em>experiment</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Model.del_experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Model.del_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>deletes the experiment object experiment from the 
models experiments</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Model.experiments">
<tt class="descname">experiments</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Model.experiments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Model.experiments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Model.get_experiment">
<tt class="descname">get_experiment</tt><big>(</big><em>experimentname</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Model.get_experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Model.get_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds and returns the experiment object corresponding
to experimnentname in the model experiment list, or if no 
match is found, returns an empty list.</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Model.num_experiments">
<tt class="descname">num_experiments</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Model.num_experiments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Model.num_experiments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of experiments defined for the model</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cmipdata.classes.Realization">
<em class="property">class </em><tt class="descclassname">cmipdata.classes.</tt><tt class="descname">Realization</tt><big>(</big><em>realizationname</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Realization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Realization" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Defines a realization for a given model and experiment, 
with a name and a list of
assiciated variables, which can be retrieved with
realization.variables(). New variables can be added
to the realization with realization.add_variable(variable)</p>
<dl class="method">
<dt id="cmipdata.classes.Realization.add_variable">
<tt class="descname">add_variable</tt><big>(</big><em>variable</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Realization.add_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Realization.add_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the variable object to the 
realization&#8217;s variables.</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Realization.del_variable">
<tt class="descname">del_variable</tt><big>(</big><em>variable</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Realization.del_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Realization.del_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the variable object to the 
realization&#8217;s variables.</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Realization.get_variable">
<tt class="descname">get_variable</tt><big>(</big><em>variablename</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Realization.get_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Realization.get_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds and returns the variable object corresponding
to variablename in the realization&#8217;s variable list, or if no 
match is found, returns an empty list.</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Realization.num_variables">
<tt class="descname">num_variables</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Realization.num_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Realization.num_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of variables defined for the 
realization instance</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Realization.variables">
<tt class="descname">variables</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Realization.variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Realization.variables" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cmipdata.classes.Variable">
<em class="property">class </em><tt class="descclassname">cmipdata.classes.</tt><tt class="descname">Variable</tt><big>(</big><em>variablename</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Defines a variable for a given model, experiment and realization,
with a name, and an associated list of filenames, which can be retrieved 
with variable.filenames(). A new filename can be added with 
variable.add_filename(&#8216;filename.nc&#8217;)</p>
<dl class="method">
<dt id="cmipdata.classes.Variable.add_end_date">
<tt class="descname">add_end_date</tt><big>(</big><em>end_date</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Variable.add_end_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Variable.add_end_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds end_date to the variable&#8217;s list of file end-dates</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Variable.add_filename">
<tt class="descname">add_filename</tt><big>(</big><em>filename</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Variable.add_filename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Variable.add_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds filname to the variable&#8217;s list of files</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Variable.add_realm">
<tt class="descname">add_realm</tt><big>(</big><em>realm</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Variable.add_realm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Variable.add_realm" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds realm to the variable</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Variable.add_start_date">
<tt class="descname">add_start_date</tt><big>(</big><em>start_date</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Variable.add_start_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Variable.add_start_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds start_dates to the variable&#8217;s list of file start-dates</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Variable.del_filename">
<tt class="descname">del_filename</tt><big>(</big><em>filename</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Variable.del_filename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Variable.del_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a filname from the variable&#8217;s list of files</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Variable.filenames">
<tt class="descname">filenames</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Variable.filenames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Variable.filenames" title="Permalink to this definition">¶</a></dt>
<dd><p>Retuns a list of filenames associated with the variable</p>
</dd></dl>

<dl class="method">
<dt id="cmipdata.classes.Variable.num_files">
<tt class="descname">num_files</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#Variable.num_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.Variable.num_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of files listed for the 
variable instance</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cmipdata.classes.mkensemble">
<tt class="descclassname">cmipdata.classes.</tt><tt class="descname">mkensemble</tt><big>(</big><em>filepattern</em>, <em>experiment='*'</em>, <em>prefix=''</em>, <em>kwargs=''</em><big>)</big><a class="reference internal" href="_modules/cmipdata/classes.html#mkensemble"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.classes.mkensemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a cmipdata ensemble object from a list of 
filenames matching filepattern. filepattern is a string that by default
is matched against all files in the current directory. But filepattern 
could include a full path to reference files not in the current directory, 
and can also include wildcards.</p>
<p>Once the list of matching filenames is derived, the model, experiment,
realization, variable, start_date and end_date fields are extracted by
parsing the filnames against a specified file naming convention. By 
default this is the CMIP5 convention, which is</p>
<p>variable_realm_model_experiment_realization_startdate-enddate.nc</p>
<p>Optionally specifying prefix will remove prefix from each filename
before the parsing is done. This is useful, for example, to remove 
pre-pended paths used in filepattern.</p>
<p>EXAMPLES:</p>
<p># ensemble of all sea-level pressure files from the historical experiment in 
# the current directory.</p>
<p>ens = mkensemble(&#8216;psl*historical*.nc&#8217;)</p>
<p># ensemble of all sea-level pressure files from all experiments in a non-local
# directory</p>
<dl class="docutils">
<dt>ens = mkensemble(&#8216;/home/ncs/ra40/cmip5/sam/c5_slp/psl*&#8217;</dt>
<dd>, prefix=&#8217;/home/ncs/ra40/cmip5/sam/c5_slp/&#8217;)</dd>
</dl>
<p>If the default CMIP5 naming convention is not used by your files,
an arbitary naming convention for the parsing may be specified by
kwargs. kwargs is a dictionary whos keys contain each element (model, 
experiment,realization, variable, start_date and end_date) and
whos values are the position in the filename that the element occurs.
In addition, the key &#8216;separator&#8217; must contain the element separator.
For example, for the CMIP5 naming convention:</p>
<p>kwargs = {&#8216;separator&#8217;:&#8217;_&#8217;, &#8216;variable&#8217;:0, &#8216;realm&#8217;:1, &#8216;model&#8217;:2, &#8216;experiment&#8217;:3,
&#8216;realization&#8217;:4, &#8216;dates&#8217;:5}</p>
<p>ens = mkensemble(&#8216;psl*.nc&#8217;, <a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs)</p>
</dd></dl>

</div>
<div class="section" id="module-cmipdata.loading_tools">
<span id="cmipdata-loading-tools-module"></span><h2>cmipdata.loading_tools module<a class="headerlink" href="#module-cmipdata.loading_tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="loading-tools">
<h3>loading_tools<a class="headerlink" href="#loading-tools" title="Permalink to this headline">¶</a></h3>
<p>The loading_tools module of cmipdata is a set of functions which use 
the cdo python bindings and NetCDF4 to load data from input NetCDF
files listed in a cmipdata ensemble object into python numpy arrays.
Some processing can optionally be done during the loading, specifically
remapping, time-slicing, time-averaging and zonal-averaging. Functions 
are</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>loadvar: loads a given variable from a given file, and optionally</dt>
<dd><p class="first last">does processing</p>
</dd>
</dl>
</li>
<li><p class="first">loadfiles: loads data from multiple files.</p>
</li>
<li><dl class="first docutils">
<dt>get_dimensions: gets the dimensions from a netCDF files and returns</dt>
<dd><p class="first last">them in a dict.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Neil Swart, 07/2014</p>
<dl class="function">
<dt id="cmipdata.loading_tools.get_dimensions">
<tt class="descclassname">cmipdata.loading_tools.</tt><tt class="descname">get_dimensions</tt><big>(</big><em>ifile</em>, <em>varname</em>, <em>toDatetime=False</em><big>)</big><a class="reference internal" href="_modules/cmipdata/loading_tools.html#get_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.loading_tools.get_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the dimensions of variable varname in file ifile as a dictionary.
If one of the dimensions begins with lat (Lat, Latitude and Latitudes), it 
will be returned with a key of lat, and similarly for lon. If to a Datetime=True, 
the time dimension is converted to a datetime.</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.loading_tools.loadens">
<tt class="descclassname">cmipdata.loading_tools.</tt><tt class="descname">loadens</tt><big>(</big><em>ens</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cmipdata/loading_tools.html#loadens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.loading_tools.loadens" title="Permalink to this definition">¶</a></dt>
<dd><p>Load all variables in all files in ens into a numpy array which is
save in the the variable object under variable.data. Currently
loadens expects there to only be one filename per variable object 
(i.e. per realization).</p>
<p>Optionally specify any kwargs valid for loadvar.</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.loading_tools.loadfiles">
<tt class="descclassname">cmipdata.loading_tools.</tt><tt class="descname">loadfiles</tt><big>(</big><em>ens</em>, <em>varname</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cmipdata/loading_tools.html#loadfiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.loading_tools.loadfiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a variable &#8220;varname&#8221; from all files in ens, and load it into a matrix
where the zeroth dimensions represents an input file and dimensions 1 to n are
the dimensions of the input variable. Variable &#8220;varname&#8221; must have the same shape 
in all ifiles. Optionally specify any kwargs valid for loadvar.</p>
<p>Requires netCDF4, cdo bindings and numpy 
Returns a masked numpy array, varmat.</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.loading_tools.loadvar">
<tt class="descclassname">cmipdata.loading_tools.</tt><tt class="descname">loadvar</tt><big>(</big><em>ifile</em>, <em>varname</em>, <em>remap=''</em>, <em>start_date=''</em>, <em>end_date=''</em>, <em>timmean=False</em>, <em>zonmean=False</em><big>)</big><a class="reference internal" href="_modules/cmipdata/loading_tools.html#loadvar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.loading_tools.loadvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a CMIP5 netcdf variable &#8220;varname&#8221; from &#8220;ifile&#8221; and optionally 1) distance
weighted remap to a given grid (e.g. &#8216;r360x180), 2) select a date range between 
start_date and end_date (format: &#8216;YYYY-MM-DD&#8217;), 3) time-mean over the whole 
record, or between the selected dates and 4) zonal mean. Requires netCDF4, CDO 
and CDO python bindings. Returns a masked array, var.</p>
<p>If zonmean=True and remap=True, the zonal mean is done first, so the remap
will in that case only specify the latitude-grid, with 1-point in x, e.g.: 
remap=r180x1.</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-cmipdata.plotting_tools">
<span id="cmipdata-plotting-tools-module"></span><h2>cmipdata.plotting_tools module<a class="headerlink" href="#module-cmipdata.plotting_tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="plotting-tools">
<h3>plotting_tools<a class="headerlink" href="#plotting-tools" title="Permalink to this headline">¶</a></h3>
<p>The plotting_tools module of cmipdata is a set of functions which use 
matplotlib to produce various common plots.</p>
<p>The functions take an ensemble object and a data object. The ensemble
object is a cmipdata ensemble, the data object is a numpy array
generated using loading_tools.</p>
</div>
<div class="section" id="currently-not-working">
<h3>Currently not working<a class="headerlink" href="#currently-not-working" title="Permalink to this headline">¶</a></h3>
<p>Neil Swart, 07/2014</p>
<dl class="function">
<dt id="cmipdata.plotting_tools.ensemble_envelope_timeseries">
<tt class="descclassname">cmipdata.plotting_tools.</tt><tt class="descname">ensemble_envelope_timeseries</tt><big>(</big><em>ens</em>, <em>meanfile</em>, <em>stdfile</em>, <em>varname</em>, <em>ax=''</em>, <em>kwargs={'color': 'k'</em>, <em>'linewidth': 3}</em><big>)</big><a class="reference internal" href="_modules/cmipdata/plotting_tools.html#ensemble_envelope_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.plotting_tools.ensemble_envelope_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>For each realization in ens (and data, which is generated from ens
using loadfiles), plot the realization in color (grey by default)
for variable varname.</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.plotting_tools.plot_realization_timeseries">
<tt class="descclassname">cmipdata.plotting_tools.</tt><tt class="descname">plot_realization_timeseries</tt><big>(</big><em>ens</em>, <em>data</em>, <em>varname</em>, <em>kwargs={'color': [0.5</em>, <em>0.5</em>, <em>0.5]}</em><big>)</big><a class="reference internal" href="_modules/cmipdata/plotting_tools.html#plot_realization_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.plotting_tools.plot_realization_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>For each realization in ens (and data, which is generated from ens
using loadfiles), plot the realization in color (grey by default)
for variable varname. kwargs is a dict of option to pass to plt,
e.g.: kwargs={&#8216;color&#8217;:&#8217;r&#8217;}</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.plotting_tools.plot_realizations_1d">
<tt class="descclassname">cmipdata.plotting_tools.</tt><tt class="descname">plot_realizations_1d</tt><big>(</big><em>ens</em>, <em>data</em>, <em>varname</em>, <em>dimension</em>, <em>kwargs={'color': [0.5</em>, <em>0.5</em>, <em>0.5]}</em><big>)</big><a class="reference internal" href="_modules/cmipdata/plotting_tools.html#plot_realizations_1d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.plotting_tools.plot_realizations_1d" title="Permalink to this definition">¶</a></dt>
<dd><p>For each realization in ens (and data, which is generated from ens
using loadfiles), plot the realization in color (grey by default)
for variable varname. Data should be 1-d for each realization, along the 
dimension specified (time, lon, lat etc).</p>
<p>kwargs is a dict of option to pass to plt,
e.g.: kwargs={&#8216;color&#8217;:&#8217;r&#8217;}</p>
<p>EXAMPLES:</p>
<p># plot the uas data against latitude in red
cd.plot_realizations_1d(ens, data, varname=&#8217;uas&#8217;, dimension=&#8217;lat&#8217;, kwargs={&#8216;color&#8217;:&#8217;r&#8217;})</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-cmipdata.preprocessing_tools">
<span id="cmipdata-preprocessing-tools-module"></span><h2>cmipdata.preprocessing_tools module<a class="headerlink" href="#module-cmipdata.preprocessing_tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="preprocessing-tools-preprocesses-data-before-loading">
<h3><tt class="xref py py-mod docutils literal"><span class="pre">preprocessing_tools</span></tt> &#8211; Preprocesses data before loading<a class="headerlink" href="#preprocessing-tools-preprocesses-data-before-loading" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="cmipdata.preprocessing_tools.areaint">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">areaint</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#areaint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.areaint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.areamean">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">areamean</tt><big>(</big><em>ens</em>, <em>delete=True</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#areamean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.areamean" title="Permalink to this definition">¶</a></dt>
<dd><p>For each file in ens, calculate the area mean using CDO fldmean, 
and do a smart naming of the output and remove the input files 
if delete=True. An updated ensemble object is also returned.</p>
<p>EXAMPLE:</p>
<p>area_mean_ens = cd.areamean(ens)</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.cat_exp_slices">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">cat_exp_slices</tt><big>(</big><em>ens</em>, <em>delete=True</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#cat_exp_slices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.cat_exp_slices" title="Permalink to this definition">¶</a></dt>
<dd><p>For models which divide their output into multiple files per experiment (time-slices), cat_exp_slices concatenates
the files into one unified file using CDO, and deletes the individual slices, unless delete=False. As input 
cat_exp_slices takes a cmipdata ensemble object (see mkensemble). Unified experiment files are written to the 
current working directory, and an updated ensemble object is returned</p>
<p>The input ensemble can contain multiple models, experiments, realizations and variables, which cat_exp_slices 
will process independently. In other words, files are joined per-model, per-experiment, per-relization, per-variable.
For example, if the ensemble contains two experiments for many models/realizations for variable psl, two unified
files will be produced per realization: one for the historical and one for the rcp45 experiment. To join files
over experiments (e.g. to concatenate historical and rcp45) see cat_experiments.</p>
<p>EXAMPLE:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># For a simple ensemble comprized of only 1 model, 1 experiment and one realization. </span>
</pre></div>
</div>
<p># Look at the ensemble structure before the concatenation
ens.fulldetails()
HadCM3:</p>
<blockquote>
<div><blockquote>
<div><dl class="docutils">
<dt>historical</dt>
<dd><dl class="first last docutils">
<dt>r1i1p1</dt>
<dd><dl class="first last docutils">
<dt>ts</dt>
<dd>ts_Amon_HadCM3_historical_r1i1p1_185912-188411.nc
ts_Amon_HadCM3_historical_r1i1p1_188412-190911.nc
ts_Amon_HadCM3_historical_r1i1p1_190912-193411.nc
ts_Amon_HadCM3_historical_r1i1p1_193412-195911.nc
ts_Amon_HadCM3_historical_r1i1p1_195912-198411.nc
ts_Amon_HadCM3_historical_r1i1p1_198412-200512.nc</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>#=======================
# Do the concantenation
#=======================
ens = cd.cat_exp_slices(ens)</p>
</div></blockquote>
<p># Look at the ensemble structure before the concatenation
ens.fulldetails()
HadCM3:</p>
<blockquote>
<div><dl class="docutils">
<dt>historical</dt>
<dd><dl class="first last docutils">
<dt>r1i1p1</dt>
<dd><dl class="first last docutils">
<dt>ts</dt>
<dd>ts_Amon_HadCM3_historical_r1i1p1_185912-200512.nc</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.cat_experiments">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">cat_experiments</tt><big>(</big><em>ens</em>, <em>variable_name</em>, <em>exp1_name</em>, <em>exp2_name</em>, <em>delete=True</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#cat_experiments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.cat_experiments" title="Permalink to this definition">¶</a></dt>
<dd><p>For variable (named variable_name) concatenate experiments exp1 and exp2 
into a single file for each realization of each model listed in ensemble ens, and 
return an updated ensemble object.</p>
<ul class="simple">
<li>ens is a cmipdata ensemble object (see mkensemble).</li>
<li>variable_name is a string corresponding to a variable in ens.</li>
<li>exp1 and exp2 are strings defining the two experiments to be concatenated 
(e.g. exp1=&#8217;historical&#8217;, exp2=&#8217;rcp45&#8217;).</li>
</ul>
<p>For each realization, the concatenated file for variable variable_name is written 
to the current working directory and the input files are deleted by default, 
unless delete=False.</p>
<p>The concatenation occurs for each realization for which input files
exist for both exp1 and exp2.  If no match is found for the realization 
in exp1 (i.e. there is no corresponding realization in exp2), then the files 
for both experiments are deleted from the path (unless delete=False) and 
the realization is removed from ens. Similarly if exp2 is missing for a 
given model, that model is deleted from ens.</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.climatology">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">climatology</tt><big>(</big><em>ens</em>, <em>delete=True</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#climatology"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.climatology" title="Permalink to this definition">¶</a></dt>
<dd><p>For each file in ens, calculate the monthly climatology over the full file-length 
using CDO ymonmean, and do a smart naming of the output and remove the input files 
if delete=True (default). An updated ensemble object is also returned.</p>
<p>If you want to compute the climatology over a specific time slice, use time_slice
before compute the climatology.</p>
<p>EXAMPLE:</p>
<p>climatology_ens = cd.climatology(ens)</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.del_ens_files">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">del_ens_files</tt><big>(</big><em>ens</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#del_ens_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.del_ens_files" title="Permalink to this definition">¶</a></dt>
<dd><p>delete all files in ensemble ens</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.ens_stats">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">ens_stats</tt><big>(</big><em>ens</em>, <em>variable_name</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#ens_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.ens_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the ensemble mean and standard deviation over all models-realizations 
and experiments for variable variable_name in ens, such that each model has a weight 
of one. An output file is written containing the ensemble mean and another file is 
written with the standard deviation, containing the names &#8216;_ENS-<a href="#id3"><span class="problematic" id="id4">MEAN_</span></a>&#8216; and &#8216;_ENS-<a href="#id5"><span class="problematic" id="id6">STD_</span></a>&#8216;
in the place of the model-name. If the ensemble contains multiple experiments, files
are written for each experiment.</p>
<p>The ensemble in ens must be homogenous. That is to say all files must be on the same
grid and span the same time-frame, within each experiment (see remap, and time_slice for more).
Additionally, variable_name should have only one filename per realization and experiment. That
is, join_exp_slice should have been applied.</p>
<p>The calculation is done by, first computing the mean over all realizations for each model; 
then for the ensemble, calculating the mean over all models.</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.my_operator">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">my_operator</tt><big>(</big><em>ens</em>, <em>my_cdo_str</em>, <em>output_prefix='processed_'</em>, <em>delete=False</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#my_operator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.my_operator" title="Permalink to this definition">¶</a></dt>
<dd><p>For each file in ens, apply the cdo command contained in
my_cdo_str, creating an output file appended by &#8216;output_prefix&#8217;
which is &#8216;<a href="#id7"><span class="problematic" id="id8">processed_</span></a>&#8216; by default. An updated ensemble object
is returned.</p>
<p>Optionally delete the original input files if delete=True.</p>
<p>EXAMPLE:</p>
<p>my_ens = cd.my_operator(ens, &#8216;cdo -yearmean&#8217;, output_prefix=&#8217;<a href="#id9"><span class="problematic" id="id10">annual_</span></a>&#8216;)</p>
<p>FUTURE EXPANSION:
can easily handle more complex cases by passing a dict to my_cdo_str
and mapping defined variables such as infile...</p>
<p>defined variables are:
model, experiment, realization, variable, infile, outfile</p>
<p>e.g. my_cdo_str = &#8216;cdo sub {infile} -timmean -seldate,1991-01-01,2000-12-31 {infile} {outfile}&#8217;</p>
<dl class="docutils">
<dt>and in the function:</dt>
<dd><dl class="first last docutils">
<dt>for model, experiment, realization, variable, files in ens.iterate():</dt>
<dd><dl class="first last docutils">
<dt>for infile in files:</dt>
<dd>my_cdo_str.format(infile=&#8217;file_input.nc&#8217;,outfile=&#8217;file_output.nc&#8217;)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.remap">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">remap</tt><big>(</big><em>ens</em>, <em>remap='r360x180'</em>, <em>method='remapdis'</em>, <em>delete=True</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#remap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.remap" title="Permalink to this definition">¶</a></dt>
<dd><p>For each file in ens, remap to resolution remap=&#8217;<a href="#id11"><span class="problematic" id="id12">r_nlon_x_nlat_</span></a>&#8216;, where _nlon_, _nlat_ are the 
number of lat-lon points to use. The remap is done using cdo and a smart naming of the output and 
removal of the input files occurs if delete=True (default). An updated ensemble object is also returned.</p>
<p>By default the distance weighted remapping is used, but any valid cdo remapping method can be used
by specifying the option argument &#8216;method&#8217;, e.g. method=&#8217;remapdis&#8217;.</p>
<p>EXAMPLE:</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.time_anomaly">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">time_anomaly</tt><big>(</big><em>ens</em>, <em>start_date</em>, <em>end_date</em>, <em>delete=False</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#time_anomaly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.time_anomaly" title="Permalink to this definition">¶</a></dt>
<dd><p>For each file in ens, compute the anomaly relative the period 
between start_date and end_date, do a smart naming of the output 
and remove the input files if delete=True. An updated ensemble 
object is also returned.</p>
<p>start_date and end_date format is YYYY-MM-DD</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.time_slice">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">time_slice</tt><big>(</big><em>ens</em>, <em>start_date</em>, <em>end_date</em>, <em>delete=True</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#time_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.time_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>For each file in ens, limit the date range to between start_date and end_date, 
do a smart naming of the output and remove the input files 
if delete=True. An updated ensemble object is also returned.</p>
<p>start_date and end_date format is YYYY-MM-DD</p>
</dd></dl>

<dl class="function">
<dt id="cmipdata.preprocessing_tools.zonmean">
<tt class="descclassname">cmipdata.preprocessing_tools.</tt><tt class="descname">zonmean</tt><big>(</big><em>ens</em>, <em>delete=True</em><big>)</big><a class="reference internal" href="_modules/cmipdata/preprocessing_tools.html#zonmean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.preprocessing_tools.zonmean" title="Permalink to this definition">¶</a></dt>
<dd><p>For each file in ens, calculate the zonal mean using CDO zonmean, 
and do a smart naming of the output and remove the input files 
if delete=True (default). An updated ensemble object is also returned.</p>
<p>EXAMPLE:</p>
<p>zonal_mean_ens = cd.zonmean(ens)</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-cmipdata.slice_nc">
<span id="cmipdata-slice-nc-module"></span><h2>cmipdata.slice_nc module<a class="headerlink" href="#module-cmipdata.slice_nc" title="Permalink to this headline">¶</a></h2>
<p>Get a [time,lat,lon] slice from a netcdf file</p>
<dl class="function">
<dt id="cmipdata.slice_nc.find_index">
<tt class="descclassname">cmipdata.slice_nc.</tt><tt class="descname">find_index</tt><big>(</big><em>vec_vals</em>, <em>target</em><big>)</big><a class="reference internal" href="_modules/cmipdata/slice_nc.html#find_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.slice_nc.find_index" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the first index of vec_vals that contains the value
closest to target.</p>
<p>vec_vals: list or 1-d array
target:   list 1-d array or scalar</p>
<p>list of len(target) containing the index idx such that
vec_vals[idx] is closest to each item in target</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lons</span><span class="o">=</span><span class="p">[</span><span class="mi">110</span><span class="p">,</span><span class="mi">115</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">130</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">140</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_index</span><span class="p">(</span><span class="n">lons</span><span class="p">,[</span><span class="mf">115.4</span><span class="p">,</span><span class="mf">134.9</span><span class="p">])</span>
<span class="go">[1, 5]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cmipdata.slice_nc.get_var_2D">
<tt class="descclassname">cmipdata.slice_nc.</tt><tt class="descname">get_var_2D</tt><big>(</big><em>file_name</em>, <em>var_name</em>, <em>corners=None</em>, <em>start_date=None</em>, <em>stop_date=None</em>, <em>time_name='time'</em>, <em>lat_name='lat'</em>, <em>lon_name='lon'</em><big>)</big><a class="reference internal" href="_modules/cmipdata/slice_nc.html#get_var_2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.slice_nc.get_var_2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a netcdf file containing a [time,lat,lon] variable with name
var_name, return a slice with values
[start_date:stop_date,corners.ll.lat:corners.ur.lat,corners.ll.lon:corners.ur.lon]</p>
<p>filename: str &#8211;  name of netcdf (possible including full path) of netcdf file
varname:  str &#8211;  name of [time,lat,lon] netcdf variable (.eg. tos)
corners:  optional, my_namedtuple &#8211; Box object with latlon corner points</p>
<blockquote>
<div>if None, defaults to all lats, all lons</div></blockquote>
<dl class="docutils">
<dt>start_date: optional, datetime  &#8211; python datetime object to start slice</dt>
<dd>if None, defaults to time index 0</dd>
<dt>stop_date: optional, datetime  &#8211; python datetime object to end slice</dt>
<dd>if None, defaults to last time value</dd>
</dl>
<p>tuple containing:</p>
<p>data_nc: netCDF4 Dataset
var_nc:  netCDF4 variable
the_times: np.array of datetimes for slice
the_lats: 1-D np.array of latitudes for slice
the_lons: 1_D np.array of longitudes for slice
vararray: 2:D np.array with variable slice</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">constants</span> <span class="kn">import</span> <span class="n">warm_pool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">in_file</span><span class="o">=</span><span class="s">&#39;tos_AMSRE_L3_v7_200206-201012.nc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">corners</span><span class="o">=</span><span class="n">warm_pool</span><span class="p">,</span><span class="n">start_date</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">stop_date</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2006</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_nc</span><span class="p">,</span><span class="n">var_nc</span><span class="p">,</span><span class="n">the_times</span><span class="p">,</span><span class="n">the_lats</span><span class="p">,</span><span class="n">the_lons</span><span class="p">,</span><span class="n">sst</span><span class="o">=</span><span class="n">get_var_2D</span><span class="p">(</span><span class="n">in_file</span><span class="p">,</span><span class="s">&#39;tos&#39;</span><span class="p">,</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">([</span><span class="s">&quot;</span><span class="si">%6.3f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sst</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,:</span><span class="mi">4</span><span class="p">]])</span>
<span class="go">[&#39;301.819&#39;, &#39;301.879&#39;, &#39;301.970&#39;, &#39;302.070&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cmipdata.slice_nc.test_get_var_2D">
<tt class="descclassname">cmipdata.slice_nc.</tt><tt class="descname">test_get_var_2D</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cmipdata/slice_nc.html#test_get_var_2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cmipdata.slice_nc.test_get_var_2D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-cmipdata">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cmipdata" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cmipdata">
<h3>cmipdata<a class="headerlink" href="#cmipdata" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">cmipdata package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-cmipdata.classes">cmipdata.classes module</a></li>
<li><a class="reference internal" href="#module-cmipdata.loading_tools">cmipdata.loading_tools module</a><ul>
<li><a class="reference internal" href="#loading-tools">loading_tools</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-cmipdata.plotting_tools">cmipdata.plotting_tools module</a><ul>
<li><a class="reference internal" href="#plotting-tools">plotting_tools</a></li>
<li><a class="reference internal" href="#currently-not-working">Currently not working</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-cmipdata.preprocessing_tools">cmipdata.preprocessing_tools module</a><ul>
<li><a class="reference internal" href="#preprocessing-tools-preprocesses-data-before-loading"><tt class="docutils literal"><span class="pre">preprocessing_tools</span></tt> &#8211; Preprocesses data before loading</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-cmipdata.slice_nc">cmipdata.slice_nc module</a></li>
<li><a class="reference internal" href="#module-cmipdata">Module contents</a><ul>
<li><a class="reference internal" href="#cmipdata">cmipdata</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to cmipdata&#8217;s documentation!</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/cmipdata.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to cmipdata’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">cmipdata  documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Neil Swart.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>